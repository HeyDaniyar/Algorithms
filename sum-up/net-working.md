## OSI，TCP/IP，五层协议的体系结构，以及各层协议

![图片表示](https://uploadfiles.nowcoder.com/images/20161208/907563_1481180597500_52B08235FB035A85109427E9743E1BF3)
```java
OSI分层 （7层）：
物理层、数据链路层、网络层、传输层、会话层、表示层、应用层。

TCP/IP分层（4层）：网络接口层、 网际层、运输层、 应用层。

五层协议 （5层）：物理层、数据链路层、网络层、运输层、 应用层。
每一层的协议如下：
物理层：RJ45、CLOCK、IEEE802.3 （中继器，集线器）
数据链路：PPP、FR、HDLC、VLAN、MAC （网桥，交换机）
网络层：IP、ICMP、ARP、RARP、OSPF、IPX、RIP、IGRP、 （路由器）
传输层：TCP、UDP、SPX
会话层：NFS、SQL、NETBIOS、RPC
表示层：JPEG、MPEG、ASII
应用层：FTP、DNS、Telnet、SMTP、HTTP、WWW、NFS

每一层的作用如下：
物理层：通过媒介传输比特,确定机械及电气规范（比特Bit）
数据链路层：将比特组装成帧和点到点的传递（帧Frame）
网络层：负责数据包从源到宿的传递和网际互连（包PackeT）
传输层：提供端到端的可靠报文传递和错误恢复（段Segment）
会话层：建立、管理和终止会话（会话协议数据单元SPDU）
表示层：对数据进行翻译、加密和压缩（表示协议数据单元PPDU）
应用层：允许访问OSI环境的手段（应用协议数据单元APDU）
```

## http和https的区别
https和http相比多了一个s，这个s就是security。在http中，数据接受和发送都是明文的，也就是有人如果用抓包工具去分析的你发送的包，是可以分析出来你的具体信息的。而https是在tcp协议的基础上增加了TLS和SSL安全协议，保证了网页以加密的方式传输。用协商的对称加密算法和密钥加密保证数据安全性。用协商的hash算法对数据完整性进行保护，保证数据不被篡改。

##  TCP和UDP的区别？
```java
TCP提供面向连接的、可靠的数据流传输，而UDP提供的是非面向连接的、不可靠的数据流传输。
TCP传输单位称为TCP报文段，UDP传输单位称为用户数据报。
TCP注重数据安全性，UDP数据传输快，因为不需要连接等待，少了许多操作，但是其安全性却一般。
TCP对应的协议和UDP对应的协议
TCP对应的协议：
（1） FTP：定义了文件传输协议，使用21端口。
（2） Telnet：一种用于远程登陆的端口，使用23端口，用户可以以自己的身份远程连接到计算机上，可提供基于DOS模式下的通信服务。
（3） SMTP：邮件传送协议，用于发送邮件。服务器开放的是25号端口。
（4） POP3：它是和SMTP对应，POP3用于接收邮件。POP3协议所用的是110端口。
（5）HTTP：是从Web服务器传输超文本到本地浏览器的传送协议。
UDP对应的协议：
（1） DNS：用于域名解析服务，将域名地址转换为IP地址。DNS用的是53号端口。
（2） SNMP：简单网络管理协议，使用161号端口，是用来管理网络设备的。由于网络设备很多，无连接的服务就体现出其优势。
（3） TFTP(Trival File Tran敏感词er Protocal)，简单文件传输协议，该协议在熟知端口69上使用UDP服务。
```

## HTTP状态码

- **1XX (临时响应)表示临时响应并需要请求者继续执行操作的状态代码.**
  - 100 (继续) 请求者应当继续提出请求。 服务器返回此代码表示已收到请求的第一部分，正在等待其余部分。
  - 101 (切换协议) 请求者已要求服务器切换协议，服务器已确认并准备切换。

- **2XX (成功)表示成功处理了请求的状态代码**
  - 200 (成功) 服务器已成功处理了请求。 通常，这表示服务器提供了请求的网页。

  - 201 (已创建) 请求成功并且服务器创建了新的资源。

- **3xx (重定向) 表示要完成请求，需要进一步操作。 通常，这些状态代码用来重定向**
  - 300 (多种选择) 针对请求，服务器可执行多种操作。 服务器可根据请求者 (user agent) 选择一项操作，或提供操作列表供请求者选择。

  - 301 (永久移动) 请求的网页已永久移动到新位置。 服务器返回此响应(对 GET 或 HEAD 请求的响应)时，会自动将请求者转到新位置

  - 302 (临时移动) 服务器目前从不同位置的网页响应请求，但请求者应继续使用原有位置来进行以后的请求。

  - 305 (使用代理) 请求者只能使用代理访问请求的网页。 如果服务器返回此响应，还表示请求者应使用代理。

- **4xx(请求错误) 这些状态代码表示请求可能出错，妨碍了服务器的处理**
  - 400 (错误请求) 服务器不理解请求的语法。

  - 401 (未授权) 请求要求身份验证。 对于需要登录的网页，服务器可能返回此响应。

  - 403 (禁止) 服务器拒绝请求。

  - 404 (未找到) 服务器找不到请求的网页。

- **5xx(服务器错误)这些状态代码表示服务器在尝试处理请求时发生内部错误。 这些错误可能是服务器本身的错误，而不是请求出错**
  - 500 (服务器内部错误) 服务器遇到错误，无法完成请求。

  - 501 (尚未实施) 服务器不具备完成请求的功能。 例如，服务器无法识别请求方法时可能会返回此代码。

  - 502 (错误网关) 服务器作为网关或代理，从上游服务器收到无效响应。

  - 503 (服务不可用) 服务器目前无法使用(由于超载或停机维护)。 通常，这只是暂时状态。

  - 504 (网关超时) 服务器作为网关或代理，但是没有及时从上游服务器收到请求。

  - 505 (HTTP 版本不受支持) 服务器不支持请求中所用的 HTTP 协议版本。



## https和http的区别
- https和http相比，多了一个s,这个s就是security。两者虽然建立在TCP或者UDP协议，但是http是在TCP 80端口工作，所封装的信息都是明文的，通过抓包工具可以分析出其内容。而https是工作在TCP 443端口，并且是建立在SSL/TLS之上的，所有的传输内容都经过加密。


## 如何实现的session的跟踪
- 隐藏表单域

隐藏表单域一般是在表单提交时在JSP中声明一个隐藏域，可携带数据到表单提交后的页面。如下：
   <input type="hidden" name="token"
  value="<%=session.getAttribute("token")
  %>">
- 保存cookies

Http是无状态协议，cookie是客户端保存用户会话数据，用于保存用户会话记录。
- url重写

当客户端浏览器禁用cookie时，只有采用URL复写的方式将sessionId携带在URL的末尾来保存会话记录。
- session机制

session是服务端保存用户数据，生成Session时会默认设置一个cookie值为sessionId的cookie保存到客户端

## 三层挥手和四次挥手的状态改变

![状态](http://img.my.csdn.net/uploads/201303/21/1363876245_7915.JPG)

## 怎么理解RESTful架构？

简单的说, RESTful 是把每个 URI 当做资源 (Resources), 通过 method 作为动词来对资源做不同的动作, 然后服务器返回 status 来得知资源状态的变化 (State Transfer);

## 不同HTTP方法的比较

> #### get和post的区别

虽然有些时候get能做的事情或许post也能做，但是从HTTP规范来说，GET用于信息获取，POST表示可能修改变服务器上的资源的请求。除此之外，如果从一些细节考虑，两者还有如下区别：
  1. 两个传输数据的方式不同
GET请求的数据会附在URL之后（就是把数据放置在HTTP协议头中），**以`?`分割URL和传输数据，参数之间以`&`相连**。如果数据是英文字母或者数字，原样发送，如果是空格，转换为+，如果是中文/其他字符，则直接把字符串用BASE64加密。POST把提交的数据则放置在是HTTP包的包体中。

2. GET方式提交的数据最多只能是1024字节（因为有些操作系统或浏览器对URL长度的限制），理论上POST没有限制（后端可调节）。

3. POST的安全性要比GET的安全性高(如果通过GET提交数据，用户名和密码将明文出现在URL上)

> #### put和post的区别

POST 是新建 (create) 资源, 非幂等, 同一个请求如果重复 POST 会新建多个资源. PUT 是 Update/Replace, 幂等, 同一个 PUT 请求重复操作会得到同样的结果.


### Cookie和Session还有webStorage的使用场景？


首先来说说cookie和session，cookie是存储在浏览器上的一小段数据，用来记录某些当页面关闭或者刷新后仍然需要记录的信息。在控制台用 「document.cookie」查看你当前正在浏览的网站的cookie。每次网络请求 Request headers 中都会带上cookie。所以如果 cookie 太多太大对传输效率会有影响。

而session是一个服务器端的概念，用来记录一些用户的状态。当一个用户打开淘宝登录后，刷新浏览器仍然展示登录状态。服务器如何分辨这次发起请求的用户是刚才登录过的用户呢？这里就使用了session保存状态。
- 用户在输入用户名密码提交给服务端，服务端验证通过后会创建一个session用于记录用户的相关信息，这个 session 可保存在服务器内存中，也可保存在数据库中。
- 创建session后，会把关联的session_id 通过setCookie 添加到http响应头部中。
浏览器在加载页面时发现响应头部有 set-cookie字段，就把这个cookie 种到浏览器指定域名下。
- 当下次刷新页面时，发送的请求会带上这条cookie， 服务端在接收到后根据这个session_id来识别用户。

所以说，cookie 是存储在浏览器里的一小段「数据」，而session是一种让服务器能识别某个用户的「机制」，session 在实现的过程中需要使用cookie。 二者不是同一维度的东西。

## HTTP报文分析
在请求中，HTTP报文通常由方法，URI，HTTP版本，HTTP首部字段等，而在响应报文中通常由HTTP版本，状态码，HTTP首部字段3部分构成。

在http首部字段中，分为通用首部字段，请求首部字段和响应首部字段等，下面从分别来列举一些常用的字段。
### 通用首部字段
- #### Cache-Control 指定缓存的工作机制
  - public 其他用户也可以利用缓存
  - private 只以特定的用户作为对象
  - no-cache 防止从缓存中返回过期的资源
- #### Connection
  - keep-alive 持久连接（http1.1默认）
- #### Trailer 事先说明在报文主题后记录了哪些首部字段
- #### Transfer-Encoding 规定传输报文主题的编码方式
